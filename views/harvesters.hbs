<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Browse and Manage Harvesters</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <header>
    <a href="/" class="header-link">
      <h1>Browse and Manage Harvesters</h1>
    </a>
  </header>
  <nav class="nav-links">
    <a href="/orders" class="nav-button">Orders</a>
    <a href="/customers" class="nav-button">Customers</a>
    <a href="/shipments" class="nav-button">Shipments</a>
    <a href="/spice_silos" class="nav-button">Spice Silos</a>
    <a href="/harvesters" class="nav-button">Harvesters</a>
  </nav>
  <section>
    <h2>Existing Harvesters</h2>
    <table border="1" id="Harvesters-table">
      <thead>
        <tr>
          <th>Harvester ID</th>
          <th>Base City</th>
          <th>Model</th>
          <th>Team Captain</th>
          <th>Last Maintenance Date</th>
          <th>Total Harvested</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#each data}}
        <tr data-value="{{this.harvester_id}}">
          <td>{{this.harvester_id}}</td>
          <td>{{this.base_city}}</td>
          <td>{{this.model}}</td>
          <td>{{this.team_captain}}</td>
          <td>{{this.last_maintenance_date}}</td>
          <td>{{this.total_harvested}}</td>
          <td>
            <button onclick="editHarvester({{this.harvester_id}})">Edit</button>
            <button onclick="deleteHarvester({{this.harvester_id}})">Delete</button>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </section>

  <section>
    <h2>Add New Harvester</h2>
    <form id="add-harvester-form-ajax">
      <label for="input-base-city">Base City:</label>
      <input type="text" id="input-base-city" name="base_city" required autocomplete="city"><br><br>
      
      <label for="input-model">Model:</label>
      <input type="text" id="input-model" name="model" required autocomplete="model"><br><br>
      
      <label for="input-team-captain">Team Captain:</label>
      <input type="text" id="input-team-captain" name="team_captain" required autocomplete="captain"><br><br>
      
      <label for="input-last-maintenance-date">Last Maintenance Date:</label>
      <input type="date" id="input-last-maintenance-date" name="last_maintenance_date"autocomplete="date"><br><br>
      
      <label for="input-total-harvested">Total Harvested:</label>
      <input type="number" id="input-total-harvested" name="total_harvested" step="any" required autocomplete="harvest"><br><br>
      
      <button type="submit">Add Harvester</button>
    </form>
  </section>

  <section>
    <h2>Update Harvester Information</h2>
    <p>Select a harvester to edit and update their details.</p>
    <form id="update-harvester-form-ajax">

      <input type="hidden" id="harvester-id-update" name="harvester-id">

      <label for="input-base-city-update">Base City:</label>
      <input type="text" id="input-base-city-update" name="input-base-city" placeholder="Enter harvester name" required>
      
      <label for="input-model-update">Model:</label>
      <input type="text" id="input-model-update" name="input-model" placeholder="Enter model name" required>
      
      <label for="input-team-captain-update">Team Captain:</label>
      <input type="text" id="input-team-captain-update" name="input-team-captain" placeholder="Enter team captain name" required>
      
      <label for="input-last-maintenance-date-update">Last Maintenance Date:</label>
      <input type="date" id="input-last-maintenance-date-update" name="last-maintenance-date-update" placeholder="Enter last maintenance date">
      
      <label for="input-total-harvested-update">Total Harvested:</label>
      <input type="number" id="input-total-harvested-update" name="input-total-harvested" step="any" placeholder="Enter total harvested" required>
      
      <button type="submit">Update Harvester</button>

    </form>
  </section>

  <script src="./js/harvesters/add_harvester.js"></script>
  <script src="./js/harvesters/update_harvester.js"></script>
  <script src="./js/harvesters/delete_harvester.js"></script>
  
  <section>
    <h2>Manage Harvester-Silo Associations</h2>
    <table border="1">
      <thead>
        <tr>
          <th>Association ID</th>
          <th>Harvester ID</th>
          <th>Silo ID</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>1</td>
          <td>1</td>
          <td>2</td>
          <td>
            <button onclick="editRecord('harvester_silo', 1)">Edit</button>
            <button onclick="deleteRecord('harvester_silo', 1)">Delete</button>
          </td>
        </tr>
        <tr>
          <td>2</td>
          <td>1</td>
          <td>5</td>
          <td>
            <button onclick="editRecord('harvester_silo', 2)">Edit</button>
            <button onclick="deleteRecord('harvester_silo', 2)">Delete</button>
          </td>
        </tr>
        <tr>
          <td>3</td>
          <td>5</td>
          <td>2</td>
          <td>
            <button onclick="editRecord('harvester_silo', 3)">Edit</button>
            <button onclick="deleteRecord('harvester_silo', 3)">Delete</button>
          </td>
        </tr>
        <tr>
          <td>4</td>
          <td>3</td>
          <td>4</td>
          <td>
            <button onclick="editRecord('harvester_silo', 4)">Edit</button>
            <button onclick="deleteRecord('harvester_silo', 4)">Delete</button>
          </td>
        </tr>
        <tr>
          <td>5</td>
          <td>4</td>
          <td>4</td>
          <td>
            <button onclick="editRecord('harvester_silo', 5)">Edit</button>
            <button onclick="deleteRecord('harvester_silo', 5)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
    <h3>Add Harvester-Silo Association</h3>
    <form id="harvesterSiloForm">
      <label for="assoc_harvester_id">Select Harvester:</label>
      <select id="assoc_harvester_id" name="assoc_harvester_id" required>
        <option value="1">Harvester 1 (HV-9236 - Carthag)</option>
        <option value="2">Harvester 2 (HV-5780 - Carthag)</option>
        <option value="3">Harvester 3 (HV-1647 - Arrakeen)</option>
      </select><br><br>

      <label for="assoc_silo_id">Select Silo:</label>
      <select id="assoc_silo_id" name="assoc_silo_id" required>
        <option value="1">Silo 1 (Arrakeen)</option>
        <option value="2">Silo 2 (Carthag)</option>
        <option value="3">Silo 3 (Arrakeen)</option>
      </select><br><br>

      <button type="submit">Add Association</button>
    </form>
  </section>
  <script>
    document.getElementById('harvesterForm').addEventListener('submit', function(e) {
      e.preventDefault();
      alert('New harvester submitted (static demo).');
    });
    document.getElementById('harvesterSiloForm').addEventListener('submit', function(e) {
      e.preventDefault();
      alert('New harvester-silo association submitted (static demo).');
    });
    
    function editRecord(recordType, id) {
      alert("Edit " + recordType + " record with id " + id + " (static demo).");
    }
    
    function deleteRecord(recordType, id) {
      alert("Delete " + recordType + " record with id " + id + " (static demo).");
    }
    
</body>
</html>