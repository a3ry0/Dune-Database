<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Browse and Manage Orders</title>
  <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
  <header>
    <a href="/" class="header-link">
      <h1>Browse and Manage Orders</h1>
    </a>
  </header>
  <nav class="nav-links">
    <a href="/orders" class="nav-button">Orders</a>
    <a href="/customers" class="nav-button">Customers</a>
    <a href="/shipments" class="nav-button">Shipments</a>
    <a href="/spice_silos" class="nav-button">Spice Silos</a>
    <a href="/harvesters" class="nav-button">Harvesters</a>
  </nav>
  <section>
    <h2>Existing Orders</h2>
    <table border="1" id="Orders-table">
      <thead>
        <tr>
          <th>Order ID</th>
          <th>Customer</th>
          <th>Order Date</th>
          <th>Total Quantity</th>
          <th>Order Status</th>
          <th>Destination</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {{#each orders}}
        <tr data-value="{{this.order_id}}" data-customer-id="{{this.customer_id}}">
          <td>{{this.order_id}}</td>
          <td>{{this.customer_name}}</td>
          <td>{{this.order_date}}</td>
          <td>{{this.total_quantity}}</td>
          <td>{{this.order_status}}</td>
          <td>{{this.destination}}</td>
          <td>
            <button onclick="editOrder({{this.order_id}})">Edit</button>
            <button onclick="deleteOrder({{this.order_id}})">Delete</button>
          </td>
        </tr>
        {{/each}}
      </tbody>
    </table>
  </section>
  <section>
    <h2>Add New Order</h2>
    <form id="add-order-form-ajax">
      <label for="input-customer-id">Customer:</label>
      <select id="input-customer-id" name="customer_id">
        <option value="">--Select Customer--</option>
        {{#each customers}}
        <option value="{{this.customer_id}}">{{this.name}}</option>
        {{/each}}
      </select><br><br>
      
      <label for="input-order-date">Order Date:</label>
      <input type="date" id="input-order-date" name="order_date" required><br><br>
      
      <label for="input-total-quantity">Total Quantity:</label>
      <input type="number" id="input-total-quantity" name="total_quantity" min="1" required><br><br>
      
      <label for="input-order-status">Order Status:</label>
      <select id="input-order-status" name="order_status" required>
        <option value="Pending">Pending</option>
        <option value="Partially Fulfilled">Partially Fulfilled</option>
        <option value="Completed">Completed</option>
      </select><br><br>
      
      <label for="input-destination">Destination:</label>
      <input type="text" id="input-destination" name="destination" required><br><br>
      
      <button type="submit">Add Order</button>
    </form>
  </section>

  <section>
    <h2>Update Order Information</h2>
    <p>Select an order to edit and update its details.</p>
    <form id="update-order-form-ajax">
      <input type="hidden" id="order-id-update" name="order_id">

      <label for="input-customer-id-update">Customer:</label>
      <select id="input-customer-id-update" name="customer_id">
        <option value="">--Select Customer--</option>
        {{#each customers}}
        <option value="{{this.customer_id}}">{{this.name}}</option>
        {{/each}}
      </select><br><br>
      
      <label for="input-order-date-update">Order Date:</label>
      <input type="date" id="input-order-date-update" name="order_date" required><br><br>
      
      <label for="input-total-quantity-update">Total Quantity:</label>
      <input type="number" id="input-total-quantity-update" name="total_quantity" min="1" required><br><br>
      
      <label for="input-order-status-update">Order Status:</label>
      <select id="input-order-status-update" name="order_status" required>
        <option value="Pending">Pending</option>
        <option value="Partially Fulfilled">Partially Fulfilled</option>
        <option value="Completed">Completed</option>
      </select><br><br>
      
      <label for="input-destination-update">Destination:</label>
      <input type="text" id="input-destination-update" name="destination" required><br><br>
      
      <button type="submit">Update Order</button>
    </form>
  </section>

  <script src="/js/orders/add_order.js"></script>
  <script src="/js/orders/update_order.js"></script>
  <script src="/js/orders/delete_order.js"></script>
</body>
</html>